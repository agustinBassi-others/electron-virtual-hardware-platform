virtual_hardware.h copied