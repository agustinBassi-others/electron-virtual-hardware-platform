<!-- HTML generated using hilite.me -->
<div style="background: #ffffff; overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;"><pre style="margin: 0; line-height: 125%"><span style="color: #008000">/* Copyright 2018, Agustin Bassi.</span>
<span style="color: #008000"> * All rights reserved.</span>
<span style="color: #008000"> *</span>
<span style="color: #008000"> * This file is part of ViHard library, a library of virtual hardware</span>
<span style="color: #008000"> * for Embedded Systems.</span>
<span style="color: #008000"> *</span>
<span style="color: #008000"> * Redistribution and use in source and binary forms, with or without</span>
<span style="color: #008000"> * modification, are permitted provided that the following conditions are met:</span>
<span style="color: #008000"> *</span>
<span style="color: #008000"> * 1. Redistributions of source code must retain the above copyright notice,</span>
<span style="color: #008000"> *    this list of conditions and the following disclaimer.</span>
<span style="color: #008000"> *</span>
<span style="color: #008000"> * 2. Redistributions in binary form must reproduce the above copyright notice,</span>
<span style="color: #008000"> *    this list of conditions and the following disclaimer in the documentation</span>
<span style="color: #008000"> *    and/or other materials provided with the distribution.</span>
<span style="color: #008000"> *</span>
<span style="color: #008000"> * 3. Neither the name of the copyright holder nor the names of its</span>
<span style="color: #008000"> *    contributors may be used to endorse or promote products derived from this</span>
<span style="color: #008000"> *    software without specific prior written permission.</span>
<span style="color: #008000"> *</span>
<span style="color: #008000"> * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS &quot;AS IS&quot;</span>
<span style="color: #008000"> * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE</span>
<span style="color: #008000"> * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE</span>
<span style="color: #008000"> * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE</span>
<span style="color: #008000"> * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR</span>
<span style="color: #008000"> * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF</span>
<span style="color: #008000"> * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS</span>
<span style="color: #008000"> * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN</span>
<span style="color: #008000"> * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)</span>
<span style="color: #008000"> * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE</span>
<span style="color: #008000"> * POSSIBILITY OF SUCH DAMAGE.</span>
<span style="color: #008000"> *</span>
<span style="color: #008000"> */</span>

<span style="color: #008000">/* Date: 2018-10-02 */</span>

<span style="color: #0000ff">#ifndef _VIHARD_H_</span>
<span style="color: #0000ff">#define _VIHARD_H_</span>

<span style="color: #008000">// Descomentar algunas de las siguientes lineas dependiendo la placa</span>
<span style="color: #0000ff">#define BOARD_EDU_CIAA_NXP</span>
<span style="color: #008000">//#define BOARD_CIAA_ZERO</span>
<span style="color: #008000">//#define BOARD_ARDUINO</span>
<span style="color: #008000">//#define BOARD_PC</span>

<span style="color: #008000">// Si no hay ninguna placa definida muestra un error de compilacion</span>
<span style="color: #0000ff">#if !defined(BOARD_EDU_CIAA_NXP) &amp;&amp; \</span>
<span style="color: #0000ff">	!defined(BOARD_CIAA_ZERO) &amp;&amp; \</span>
<span style="color: #0000ff">	!defined(BOARD_ARDUINO) &amp;&amp; \</span>
<span style="color: #0000ff">	!defined(BOARD_PC)</span>
<span style="color: #0000ff">#error &quot;Se debe definir un BOARD al inicio del archivo virtual_hardware.h&quot;</span>
<span style="color: #0000ff">#endif</span>

<span style="color: #008000">/*==================[inclusions]=============================================*/</span>

<span style="color: #0000ff">#include &lt;stdint.h&gt;</span>

<span style="color: #0000ff">#if defined(BOARD_PC)</span>

<span style="color: #0000ff">#include &quot;stdio.h&quot;</span>

<span style="color: #0000ff">#elif defined(BOARD_EDU_CIAA_NXP)</span>

<span style="color: #0000ff">#include &quot;sapi.h&quot;</span>

<span style="color: #0000ff">#elif defined(BOARD_CIAA_ZERO)</span>

    <span style="color: #008000">// todo poner aca la llamada correcta</span>

<span style="color: #0000ff">#elif defined(BOARD_ARDUINO)</span>

    <span style="color: #008000">// todo poner aca la llamada correcta</span>

<span style="color: #0000ff">#endif</span>


<span style="color: #008000">/*==================[cplusplus]==============================================*/</span>

<span style="color: #0000ff">#ifdef __cplusplus</span>
<span style="color: #0000ff">extern</span> <span style="color: #a31515">&quot;C&quot;</span> {
<span style="color: #0000ff">#endif</span>

<span style="color: #008000">/*==================[macros]=================================================*/</span>

<span style="color: #0000ff">#if defined(BOARD_PC)</span>

<span style="color: #0000ff">#define VIHARD_SERIAL_PORT           0</span>
<span style="color: #0000ff">#define VIHARD_BAUDRATE              115200</span>
<span style="color: #0000ff">#define CLOCK_SPEED_MHZ              0</span>

<span style="color: #0000ff">#define UART_CONFIG(baudrate)        printf(&quot;Velocidad vihard: %d&quot;, baudrate)</span>
<span style="color: #0000ff">#define UART_READ_BYTE(byteToRead)   printf(&quot;Se leera en la direccion: %d&quot;, &amp;byteToRead)</span>
<span style="color: #0000ff">#define UART_WRITE_BYTE(byteToWrite) printf(&quot;Se escribe el byte: %d&quot;, (uint8_t) byteToWrite)</span>

<span style="color: #0000ff">#elif defined(BOARD_EDU_CIAA_NXP)</span>

<span style="color: #0000ff">#define VIHARD_SERIAL_PORT           UART_USB</span>
<span style="color: #0000ff">#define VIHARD_BAUDRATE              115200</span>
<span style="color: #0000ff">#define CLOCK_SPEED_MHZ              204</span>

<span style="color: #0000ff">#define UART_CONFIG(baudrate)        uartConfig(VIHARD_SERIAL_PORT, baudrate)</span>
<span style="color: #0000ff">#define UART_READ_BYTE(byteToRead)   uartReadByte(VIHARD_SERIAL_PORT, &amp;byteToRead)</span>
<span style="color: #0000ff">#define UART_WRITE_BYTE(byteToWrite) uartWriteByte(VIHARD_SERIAL_PORT, (uint8_t) byteToWrite)</span>

<span style="color: #0000ff">#elif defined(BOARD_CIAA_ZERO)</span>

<span style="color: #008000">// todo poner aca la llamada correcta</span>

<span style="color: #0000ff">#elif defined(BOARD_ARDUINO)</span>

<span style="color: #008000">// todo poner aca la llamada correcta</span>

<span style="color: #0000ff">#endif</span>

<span style="color: #008000">// Si los estados logicos estan definidos los elimina para asegurarse</span>
<span style="color: #008000">// que el valor de true y false sean los deseados</span>
<span style="color: #0000ff">#ifdef FALSE</span>
<span style="color: #0000ff">#undef FALSE</span>
<span style="color: #0000ff">#endif</span>

<span style="color: #0000ff">#ifdef TRUE</span>
<span style="color: #0000ff">#undef TRUE</span>
<span style="color: #0000ff">#endif</span>

<span style="color: #0000ff">#define FALSE  0</span>
<span style="color: #0000ff">#define TRUE   (!FALSE)</span>

<span style="color: #008000">/*==================[typedef]================================================*/</span>

<span style="color: #0000ff">typedef</span> <span style="color: #2b91af">uint8_t</span> <span style="color: #2b91af">bool_t</span>;

<span style="color: #008000">/**</span>
<span style="color: #008000"> * Posibles valores que puede recibir la funcion de escribir un texto</span>
<span style="color: #008000"> * sobre el display LCD. LCD_LINE_ALL escribe un mensaje multilinea,</span>
<span style="color: #008000"> * los demas valores escriben sobre la primer, segunda o tercer linea del LCD.</span>
<span style="color: #008000"> */</span>
<span style="color: #0000ff">typedef</span> <span style="color: #0000ff">enum</span> _LcdLine{
    LCD_LINE_ALL    = <span style="color: #a31515">&#39;0&#39;</span>, <span style="color: #008000">//!&lt; LCD_LINE_ALL</span>
    LCD_LINE_FIRST  = <span style="color: #a31515">&#39;1&#39;</span>, <span style="color: #008000">//!&lt; LCD_LINE_FIRST</span>
    LCD_LINE_SECOND = <span style="color: #a31515">&#39;2&#39;</span>, <span style="color: #008000">//!&lt; LCD_LINE_SECOND</span>
    LCD_LINE_THIRD  = <span style="color: #a31515">&#39;3&#39;</span>  <span style="color: #008000">//!&lt; LCD_LINE_THIRD</span>
} LcdLine_t;

<span style="color: #008000">/**</span>
<span style="color: #008000"> * Mapa de perifericos virtuales a los que se puede acceder.</span>
<span style="color: #008000"> */</span>
<span style="color: #0000ff">typedef</span> <span style="color: #0000ff">enum</span> _ViHardPeriph {
    <span style="color: #008000">// Valores corespondientes a los leds</span>
    VH_LEDR      = <span style="color: #a31515">&#39;a&#39;</span>,   <span style="color: #008000">//!&lt; VH_LEDR</span>
    VH_LEDG      = <span style="color: #a31515">&#39;b&#39;</span>,   <span style="color: #008000">//!&lt; VH_LEDG</span>
    VH_LEDB      = <span style="color: #a31515">&#39;z&#39;</span>,   <span style="color: #008000">//!&lt; VH_LEDB</span>
    VH_LED1      = <span style="color: #a31515">&#39;c&#39;</span>,   <span style="color: #008000">//!&lt; VH_LED1</span>
    VH_LED2      = <span style="color: #a31515">&#39;d&#39;</span>,   <span style="color: #008000">//!&lt; VH_LED2</span>
    VH_LED3      = <span style="color: #a31515">&#39;e&#39;</span>,   <span style="color: #008000">//!&lt; VH_LED3</span>
    VH_LED4      = <span style="color: #a31515">&#39;f&#39;</span>,   <span style="color: #008000">//!&lt; VH_LED4</span>
    <span style="color: #008000">// Valores corespondientes a las teclas</span>
    VH_TEC1      = <span style="color: #a31515">&#39;g&#39;</span>,   <span style="color: #008000">//!&lt; VH_TEC1</span>
    VH_TEC2      = <span style="color: #a31515">&#39;h&#39;</span>,   <span style="color: #008000">//!&lt; VH_TEC2</span>
    VH_TEC3      = <span style="color: #a31515">&#39;i&#39;</span>,   <span style="color: #008000">//!&lt; VH_TEC3</span>
    VH_TEC4      = <span style="color: #a31515">&#39;j&#39;</span>,   <span style="color: #008000">//!&lt; VH_TEC4</span>
    <span style="color: #008000">// Valores coorespondientes a los pines ADC</span>
    VH_ADC_CH1   = <span style="color: #a31515">&#39;k&#39;</span>,   <span style="color: #008000">//!&lt; VH_ADC_CH1</span>
    <span style="color: #008000">// Valores coorespondientes a los pines DAC</span>
    VH_DAC_CH1   = <span style="color: #a31515">&#39;n&#39;</span>,   <span style="color: #008000">//!&lt; VH_DAC_CH1</span>
    <span style="color: #008000">// Valores coorespondientes al periferico LCD</span>
    VH_LCD1      = <span style="color: #a31515">&#39;o&#39;</span>,   <span style="color: #008000">//!&lt; VH_LCD1</span>
    <span style="color: #008000">// Valores coorespondientes al periferico 7 segmentos</span>
    VH_7SEG      = <span style="color: #a31515">&#39;p&#39;</span>,   <span style="color: #008000">//!&lt; VH_7SEG</span>
} ViHardPeriph_t;

<span style="color: #008000">/*==================[external data declaration]==============================*/</span>

<span style="color: #008000">/*==================[external functions declaration]=========================*/</span>

<span style="color: #2b91af">bool_t</span>   Vh_BoardConfig    (<span style="color: #2b91af">uint32_t</span> baudRate);

<span style="color: #2b91af">bool_t</span>   Vh_GpioRead       (ViHardPeriph_t gpioPin);
<span style="color: #2b91af">void</span>     Vh_GpioWrite      (ViHardPeriph_t gpioPin, <span style="color: #2b91af">bool_t</span> pinState);
<span style="color: #2b91af">void</span>     Vh_GpioToggle     (ViHardPeriph_t gpioPin);

<span style="color: #2b91af">uint16_t</span> Vh_AdcRead        (ViHardPeriph_t adcChannel);
<span style="color: #2b91af">void</span>     Vh_DacWrite       (ViHardPeriph_t dacChannel, <span style="color: #2b91af">uint16_t</span> dacValue);

<span style="color: #2b91af">void</span>     Vh_7SegmentsWrite (ViHardPeriph_t display7Segs, <span style="color: #2b91af">uint8_t</span> asciiToShow);

<span style="color: #2b91af">void</span>     Vh_LcdWriteString (ViHardPeriph_t displayLcd, LcdLine_t line, <span style="color: #2b91af">char</span> * str);

<span style="color: #008000">/*==================[cplusplus]==============================================*/</span>

<span style="color: #0000ff">#ifdef __cplusplus</span>
}
<span style="color: #0000ff">#endif</span>

<span style="color: #008000">/*==================[end of file]============================================*/</span>
<span style="color: #0000ff">#endif </span><span style="color: #008000">/* #ifndef _VIHARD_H_ */</span><span style="color: #0000ff"></span>
</pre></div>
    