<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Hello World!</title>
  </head>
  <body>
    <h1>Hello World!</h1>

    <ul id="messages"></ul>

    <div id="actions">
      <button id="turnOnLed" type="button">Turn On LED</button>
      <button id="turnOffLed" type="button">Turn Off LED</button>
    </div>

  </body>

  <script src="https://code.jquery.com/jquery-1.10.2.min.js"></script>
  <script src="/socket.io/socket.io.js"></script>
  <script type="text/javascript">
    $(function() {
      // Initialize Variables
      const socket = io();
      const $messages = $('#messages');
      const $turnOffLed = $('#turnOffLed');
      const $turnOnLed = $('#turnOnLed');
      // Socket.io listeners
      socket.on('command', (msg) => {
        displayMessage("Command received: " + msg);
      });
      socket.on('new message', (msg) => {
        displayMessage("Message from server: " + msg);
      });
      socket.on('close', () => {
        displayMessage('Lost connection to device.');
      });
      // Browser Event Listeners
      $turnOffLed.click(() => {
        //sendData('off');
        sendData('<a;1;t;0>');
      });
      $turnOnLed.click(() => {
        //sendData('on');
        sendData('<a;1;t;1>');
      });
      // Functions
      function sendData(data) {
        socket.send(data);
      }
      function displayMessage(msg) {
        $messages.append($('<li>').text(msg));
      }
    });
  </script>
</html>

<!--

<!DOCTYPE html>
<html lang="en" ng-app="tutorial">
  <head>
    <meta charset="UTF-8">

    <title>Virtual Hardware Platform</title>

    <script src="/socket.io/socket.io.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.10/angular.min.js"></script>

    <script>
      var app = angular.module('tutorial', []);
      var socket = io ();

      app.controller ('temperatura', ['$scope', function($scope){
          socket.on('arduino:data', function(lectura){
              $scope.$apply(function(){
                  if (lectura > 90){
                      $scope.dato = "max";
                  } else if (lectura < 10) {
                      $scope.dato = "min";
                  } else {
                      $scope.dato = lectura;
                  }
                  socket.emit('web:data',
                      lectura.toString()
                  );
              });
          });
      }]);

    </script>

  </head>
  <body>
    <div ng-controller="temperatura">
      temperatura: {{dato}}
    </div>
  </body>
</html>

-->




<!--

<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Arduino Nodejs</title>
  </head>
  <body>
    <canvas id="myChart"></canvas>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.4.0/Chart.min.js"></script>
    <script src="/socket.io/socket.io.js" charset="utf-8"></script>
    <script type="text/javascript">
      const socket = io();
      var ctx = document.getElementById('myChart').getContext('2d');
      var chart = new Chart(ctx, {
          // The type of chart we want to create
          type: 'line',
          // The data for our dataset
          data: {
              labels: ["Serial"],
              datasets: [{
                  label: "Serial Data from Arduino",
                  backgroundColor: 'rgb(52, 73, 94)',
                  borderColor: 'rgb(41, 128, 185)',
                  data: [],
              }]
          },
          // Configuration options go here
          options: {}
      });
      let counter = 0 ;
      socket.on('arduino:data', function (dataSerial) {
        // console.log(dataSerial);
        chart.data.labels.push(counter);
        chart.data.datasets.forEach(dataset => {
          dataset.data.push(dataSerial.value);
        });
        counter++;
        chart.update();
      });
    </script>
  </body>
</html>

-->
